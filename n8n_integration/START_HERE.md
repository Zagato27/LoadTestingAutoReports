# ๐ฏ ะะะงะะะขะ ะะขะกะฎะะ

## ะะตะฐะปะธะทะพะฒะฐะฝ ะฒะฐัะธะฐะฝั 1: ะัะดะตะปัะฝัะน Python-ัะตัะฒะธั ะดะปั AI โ

ะะฐั ััะฝะบัะธะพะฝะฐะป Load Testing Auto Reports ััะฟะตัะฝะพ ะฟะตัะตะฝะตัะตะฝ ะฒ **n8n workflow** ั ะฟะพะปะฝะพะน ะธะฝัะตะณัะฐัะธะตะน **AI-ะผะธะบัะพัะตัะฒะธัะฐ**!

---

## ๐ฆ ะงัะพ ัะพะทะดะฐะฝะพ

### ๐ ะัะฝะพะฒะฝัะต ัะฐะนะปั

1. **`n8n_load_testing_workflow_with_ai.json`** โญ
   - ะะพะปะฝัะน workflow ั AI-ะธะฝัะตะณัะฐัะธะตะน
   - 27 ัะทะปะพะฒ, ะฟะฐัะฐะปะปะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ
   - ะะพัะพะฒ ะบ ะธะผะฟะพััั ะฒ n8n

2. **`ai_service_for_n8n.py`** โญ
   - REST API ะดะปั AI-ะฐะฝะฐะปะธะทะฐ
   - ะัะฟะพะปัะทัะตั ัััะตััะฒัััะธะน AI/main.py
   - ะะพัั 5001

3. **`docker-compose.n8n.yml`** โญ
   - ะะพะปะฝัะน ััะตะบ: n8n + AI + PostgreSQL
   - ะะพัะพะฒัะน ะบ ะทะฐะฟััะบั

### ๐ ะกะบัะธะฟัั ัะฐะทะฒะตัััะฒะฐะฝะธั

4. **`deploy_ai_service.sh`** โญ
   - ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต
   - ะัะพะฒะตัะบะฐ ััะตะฑะพะฒะฐะฝะธะน
   - ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะฒะธัะฐะผะธ

5. **`test_ai_integration.sh`** โญ
   - ะะฒัะพะผะฐัะธัะตัะบะธะต ัะตััั
   - 7 ะฟัะพะฒะตัะพะบ ัะธััะตะผั
   - ะฆะฒะตัะฝะพะน ะฒัะฒะพะด ัะตะทัะปััะฐัะพะฒ

### ๐ ะะพะบัะผะตะฝัะฐัะธั

6. **`QUICK_START_AI.md`** - ะกัะฐัั ะทะฐ 5 ะผะธะฝัั
7. **`AI_INTEGRATION_GUIDE.md`** - ะะตัะฐะปัะฝะพะต ััะบะพะฒะพะดััะฒะพ
8. **`README_N8N_MIGRATION.md`** - ะะธะณัะฐัะธั ั Python
9. **`N8N_MIGRATION_GUIDE.md`** - ะะฐััะธัะตะฝะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
10. **`README_AI_FILES.md`** - ะกะฟะธัะพะบ ะฒัะตั ัะฐะนะปะพะฒ

### ๐ณ Docker

11. **`Dockerfile.ai_service`** - ะะฑัะฐะท AI-ัะตัะฒะธัะฐ
12. **`env.example.txt`** - ะจะฐะฑะปะพะฝ ะฟะตัะตะผะตะฝะฝัั

---

## ๐ ะัััััะน ััะฐัั (5 ะผะธะฝัั)

### ะจะฐะณ 1: ะะพะดะณะพัะพะฒะบะฐ

```bash
# ะกะพะทะดะฐะนัะต .env
cp env.example.txt .env

# ะััะตะดะฐะบัะธััะนัะต .env (ะะะฏะะะขะะะฌะะ!)
nano .env
```

**ะะธะฝะธะผะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ ะฒ .env:**
```bash
POSTGRES_PASSWORD=your_secure_password
PROMETHEUS_URL=http://your-prometheus:9090
GRAFANA_URL=http://your-grafana:3000
```

### ะจะฐะณ 2: ะะฐะฟััะบ

```bash
# ะกะดะตะปะฐะนัะต ัะบัะธะฟัั ะธัะฟะพะปะฝัะตะผัะผะธ (ะตัะปะธ ะตัะต ะฝะต ัะดะตะปะฐะปะธ)
chmod +x deploy_ai_service.sh test_ai_integration.sh

# ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต
./deploy_ai_service.sh
```

### ะจะฐะณ 3: ะะฐัััะพะนะบะฐ n8n

1. ะัะบัะพะนัะต: **http://localhost:5678**

2. **Import workflow:**
   - Settings โ Import from File
   - ะัะฑะตัะธัะต: `n8n_load_testing_workflow_with_ai.json`

3. **ะะฐัััะพะนัะต Credentials:**
   
   **Confluence:**
   - ะขะธะฟ: HTTP Basic Auth
   - ID: `confluence-creds`
   - Username: ะฒะฐั_ะปะพะณะธะฝ
   - Password: ะฒะฐั_ะฟะฐัะพะปั

   **Grafana:**
   - ะขะธะฟ: HTTP Basic Auth
   - ID: `grafana-creds`
   - Username: grafana_login
   - Password: grafana_password

4. **ะะบัะธะฒะธััะนัะต workflow** (ะบะฝะพะฟะบะฐ "Active")

### ะจะฐะณ 4: ะขะตัั

```bash
# ะััััะฐั ะฟัะพะฒะตัะบะฐ
./test_ai_integration.sh quick

# ะะพะปะฝัะน ัะตัั
./test_ai_integration.sh

# ะกะพะทะดะฐะฝะธะต ะพััะตัะฐ
curl -X POST http://localhost:5678/webhook/load-testing/report/create \
  -H "Content-Type: application/json" \
  -d '{
    "start": "2025-02-21T11:30",
    "end": "2025-02-21T14:10",
    "service": "NSI"
  }'
```

---

## ๐ฏ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
โโโโโโโโโโโโ
โ  ะะปะธะตะฝั  โ
โโโโโโฌโโโโโโ
     โ
     โผ
โโโโโโโโโโโโโโโโโโโโโโโโ
โ   n8n Workflow       โ
โ                      โ
โ  1. Copy page        โ
โ  2. Parallel:        โ
โ     โโ Grafana โโโโโโโ
โ     โโ Loki    โโโโโโคโ
โ     โโ AI โโโโโโโโโโโคโ
โ                     โโ
โ  3. Merge all โโโโโโโโ
โ  4. Update page      โ
โโโโโโโโโโโโฌโโโโโโโโโโโโ
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโโ
โ  AI Microservice     โ
โ  (Flask REST API)    โ
โ                      โ
โ  /health             โ
โ  /analyze            โ
โ  /config/check       โ
โโโโโโโโโโโโฌโโโโโโโโโโโโ
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโโ
โ    AI/main.py        โ
โ                      โ
โ  - Prometheus        โ
โ  - GigaChat          โ
โ  - Analysis          โ
โโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะงัะพ ะดะตะปะฐะตั AI-ะฐะฝะฐะปะธะท

AI-ะผะธะบัะพัะตัะฒะธั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฐะฝะฐะปะธะทะธััะตั:

### 1. JVM ะผะตััะธะบะธ
- ะะฐะผััั (Heap, Non-Heap)
- CPU ะฟัะพัะตััะพะฒ
- GC ะฐะบัะธะฒะฝะพััั

### 2. Database ะผะตััะธะบะธ
- ะะบัะธะฒะฝัะต ะฟะพะดะบะปััะตะฝะธั
- ะัะตะผะตะฝะฐ ะทะฐะฟัะพัะพะฒ
- ะะปะพะบะธัะพะฒะบะธ

### 3. Kafka ะผะตััะธะบะธ
- Consumer lag
- Fetch rate
- ะัะตัะตะดะธ ัะพะพะฑัะตะฝะธะน

### 4. Microservices ะผะตััะธะบะธ
- RPS
- Response times
- Error rates

**ะะตะทัะปััะฐั:** Structured JSON ั ะฒัะฒะพะดะฐะผะธ, ััะพะฒะฝัะผะธ ะฟัะพะฑะปะตะผ ะธ ัะตะบะพะผะตะฝะดะฐัะธัะผะธ

---

## โ ะงัะพ ัะฐะฑะพัะฐะตั

- โ Webhook API (ะทะฐะผะตะฝะฐ Flask)
- โ ะะพะฟะธัะพะฒะฐะฝะธะต Confluence ัััะฐะฝะธั
- โ ะะฐะณััะทะบะฐ ะณัะฐัะธะบะพะฒ Grafana
- โ ะกะฑะพั ะปะพะณะพะฒ Loki
- โ **AI-ะฐะฝะฐะปะธะท ะผะตััะธะบ**
- โ ะะฐัะฐะปะปะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ
- โ Merge ัะตะทัะปััะฐัะพะฒ
- โ ะะฑะฝะพะฒะปะตะฝะธะต ะฟะปะตะนััะพะปะดะตัะพะฒ
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- โ Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั

---

## ๐ง ะงัะพ ะฝัะถะฝะพ ะฝะฐัััะพะธัั

### 1. ะะฑะฝะพะฒะธัะต METRICS_CONFIG

ะัะบัะพะนัะต workflow ะฒ n8n โ ัะทะตะป **"Get Service Config"**

ะะพะฑะฐะฒััะต ะฒะฐัะธ ะผะตััะธะบะธ ะธะท `metrics_config.py`:

```javascript
const METRICS_CONFIG = {
  "NSI": {
    "metrics": [
      { "name": "RPS", "grafana_url": "..." },
      { "name": "ResponseTime", "grafana_url": "..." }
      // ... ะฒัะต ะฒะฐัะธ ะผะตััะธะบะธ
    ],
    "logs": [
      { "placeholder": "service-name", "filter_query": "..." }
      // ... ะฒัะต ะฒะฐัะธ ะปะพะณะธ
    ]
  }
};
```

### 2. ะัะพะฒะตัััะต AI/config.py

ะฃะฑะตะดะธัะตัั, ััะพ ะฝะฐัััะพะตะฝั:
- Prometheus URL
- GigaChat credentials
- PromQL queries
- ะกะตััะธัะธะบะฐัั mTLS (ะตัะปะธ ะฝัะถะฝั)

---

## ๐ Troubleshooting

### AI-ัะตัะฒะธั ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะะพะณะธ
docker-compose -f docker-compose.n8n.yml logs ai-analyzer

# ะะตัะตะทะฐะฟััะบ
./deploy_ai_service.sh restart
```

### AI ะฒะพะทะฒัะฐัะฐะตั ะพัะธะฑะบะธ

```bash
# ะัะพะฒะตัะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
curl http://localhost:5001/config/check | jq .

# ะัะพะฒะตัะบะฐ healthcheck
curl http://localhost:5001/health
```

### Workflow ะฝะต ัะฐะฑะพัะฐะตั

1. ะัะพะฒะตัััะต, ััะพ workflow **ะฐะบัะธะฒะธัะพะฒะฐะฝ**
2. ะัะพะฒะตัััะต credentials (Confluence, Grafana)
3. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs n8n`

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

| ะคะฐะนะป | ะะฟะธัะฐะฝะธะต | ะะปั ะบะพะณะพ |
|------|----------|----------|
| **QUICK_START_AI.md** | ะัััััะน ััะฐัั ะทะฐ 5 ะผะธะฝ | ะะพะฒะธัะบะธ |
| **AI_INTEGRATION_GUIDE.md** | ะะตัะฐะปัะฝะพะต ััะบะพะฒะพะดััะฒะพ | DevOps |
| **README_N8N_MIGRATION.md** | ะะฑัะฐั ะผะธะณัะฐัะธั | ะัะต |
| **N8N_MIGRATION_GUIDE.md** | ะะฐััะธัะตะฝะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั | ะััะธัะตะบัะพัั |
| **README_AI_FILES.md** | ะกะฟะธัะพะบ ะฒัะตั ัะฐะนะปะพะฒ | ะกะฟัะฐะฒะบะฐ |

---

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

1. โ **ะะฐะฟัััะธัะต ัะธััะตะผั:**
   ```bash
   ./deploy_ai_service.sh
   ```

2. โ **ะะผะฟะพััะธััะนัะต workflow ะฒ n8n**

3. โ **ะะฐัััะพะนัะต credentials**

4. โ **ะะฑะฝะพะฒะธัะต METRICS_CONFIG**

5. โ **ะัะพัะตััะธััะนัะต:**
   ```bash
   ./test_ai_integration.sh
   ```

6. โ **ะกะพะทะดะฐะนัะต ะฟะตัะฒัะน ะพััะตั!**

---

## ๐ก ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะะฐะทะฒะตัััะฒะฐะฝะธะต
./deploy_ai_service.sh

# ะขะตััะธัะพะฒะฐะฝะธะต
./test_ai_integration.sh

# ะะพะณะธ AI
docker-compose -f docker-compose.n8n.yml logs -f ai-analyzer

# ะะพะณะธ n8n
docker-compose -f docker-compose.n8n.yml logs -f n8n

# ะััะฐะฝะพะฒะบะฐ
./deploy_ai_service.sh stop

# ะะพะปะฝะฐั ะพัะธััะบะฐ
./deploy_ai_service.sh clean
```

---

## ๐ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!

ะัะต ัะฐะนะปั ัะพะทะดะฐะฝั, ะดะพะบัะผะตะฝัะฐัะธั ะณะพัะพะฒะฐ, ัะบัะธะฟัั ะฝะฐัััะพะตะฝั.

**ะะฐัะฝะธัะต ั [QUICK_START_AI.md](QUICK_START_AI.md) ะดะปั ะฑััััะพะณะพ ััะฐััะฐ!**

ะฃะดะฐัะธ! ๐

---

## ๐ ะะพะผะพัั

- ะัััััะน ััะฐัั: `QUICK_START_AI.md`
- Troubleshooting: `AI_INTEGRATION_GUIDE.md` (ัะฐะทะดะตะป Troubleshooting)
- ะะพะปะฝัะน ัะฟะธัะพะบ ัะฐะนะปะพะฒ: `README_AI_FILES.md`

